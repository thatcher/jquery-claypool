var Claypool={Logging:{},extend:function(c,b,a){b.apply(c,a||[])}};(function(b,a){a.Logging.NullLogger=function(){var c=function(){return this};b.extend(this,{debug:c,info:c,warn:c,error:c,exception:c});return this};b.extend(a.Logging.NullLogger.prototype,{getLogger:function(){return new a.Logging.NullLogger()}})})(jQuery,Claypool);(function(b,a){a.Configuration={ioc:[],aop:[],logging:[],mvc:{"hijax:a":[],"hijax:form":[],"hijax:button":[],"hijax:event":[]},env:{dev:{},prod:{},test:{}}}})(jQuery,Claypool);(function(b,a){a.CachingStrategy$Interface={cache:null,size:null,clear:function(){throw"MethodNotImplementedError"},add:function(d,c){throw"MethodNotImplementedError"},remove:function(c){throw"MethodNotImplementedError"},find:function(c){throw"MethodNotImplementedError"}}})(jQuery,Claypool);(function(b,a){a.SimpleCachingStrategy=function(c){b.extend(true,this,c);this.logger=new a.Logging.NullLogger();this.clear();return this};b.extend(a.SimpleCachingStrategy.prototype,a.CachingStrategy$Interface,{clear:function(){this.logger.debug("Clearing Cache.");this.cache=null;this.cache={};this.size=0},add:function(d,c){this.logger.debug("Adding To Cache: %s",d);if(!this.cache[d]){this.cache[d]=c;this.size++;return d}return null},remove:function(c){this.logger.debug("Removing From Cache id: %s",c);if(this.find(c)){return(delete this.cache[c])?--this.size:-1}return null},find:function(c){this.logger.debug("Searching Cache for id: %s",c);return this.cache[c]||null}})})(jQuery,Claypool);(function(b,a){a.Context=function(c){a.extend(this,a.SimpleCachingStrategy);b.extend(true,this,c);this.logger=new a.Logging.NullLogger()};b.extend(a.Context.prototype,a.SimpleCachingStrategy.prototype,{get:function(c){throw"MethodNotImplementedError"},put:function(d,c){throw"MethodNotImplementedError"}})})(jQuery,Claypool);(function(b,a){a.ContextContributor=function(c){a.extend(this,a.Context);b.extend(true,this,c);this.logger=b.logger("Claypool.ContextContributor")};b.extend(a.ContextContributor.prototype,a.Context.prototype,{registerContext:function(c){throw"MethodNotImplementedError"}})})(jQuery,Claypool);(function(b,a){a.Router=function(c){a.extend(this,a.SimpleCachingStrategy);b.extend(true,this,c);this.logger=a.Logging.getLogger("Claypool.Router")};b.extend(a.Router.prototype,a.SimpleCachingStrategy.prototype,{compile:function(g,d){this.logger.debug("compiling patterns for match strategies");var f,k,h;var e,c;d=d.split("|");for(e=0;e<g.length;e++){for(c=0;c<d.length;c++){f=g[e][d[c]];h=[];if(f){this.logger.debug("Compiling \n\tpattern: %s for \n\ttarget.",f);f=f.replace(/\<\:(.+?)\:\>/g,function(){var j,l=arguments[0].indexOf("(");j=arguments[0].substring(2,l);h.push(j);return arguments[0].substring(l,arguments[0].length-2)});f=f.replace(/\|\:\w+\|/g,function(){var i;i=arguments[0].substring(2,arguments[0].length-1);h.push(i);return"([\\w\\-\\.]+)"});this.add(String(a.uuid()),{pattern:new RegExp(f),payload:g[e],params:h})}}}return this},first:function(d){this.logger.debug("Using strategy 'first'");var c,f,e={};for(f in this.cache){c=this.find(f);this.logger.debug("checking pattern %s for string %s",c.pattern,d);if(c&&c.pattern&&c.pattern.test&&c.pattern.test(d)){this.logger.debug("found match for \n\tpattern: %s \n\ttarget : %s ",c.pattern,c.payload.controller||c.payload.rewrite);if(c.params&&c.params.length>0){d.replace(c.pattern,function(){var g;for(g=1;g<arguments.length-2;g++){e[c.params[g-1]]=arguments[g]}})}return[b.extend({map:e},c)]}}this.logger.debug("found no match for \n\tpattern: %s",d);return[]},all:function(d){this.logger.debug("Using strategy 'all'");var e=[];var c,g,f={};for(g in this.cache){c=this.find(g);this.logger.debug("checking pattern: %s for string %s",c.pattern,d);if(c&&c.pattern&&c.pattern.test&&c.pattern.test(d)){this.logger.debug("found match for \n\tpattern: %s \n\ttarget : %s ",c.pattern,c.payload.controller);if(c.params&&c.params.length>0){d.replace(c.pattern,function(){var h;for(h=1;h<arguments.length-2;h++){f[c.params[h-1]]=arguments[h]}})}e.push(b.extend({map:f},c))}}if(e.length===0){this.logger.debug("found no match for \n\tpattern: %s",d)}return e}})})(jQuery,Claypool);(function(b,a){a.Factory$Interface={create:function(){throw"MethodNotImplementedError"}}})(jQuery,Claypool);(function(b,a){a.Configurable$Interface={configurationId:null,configuration:null,configurationUrl:null,configurationType:null,getConfig:function(){throw"MethodNotImplementedError"},loadConfig:function(){throw"MethodNotImplementedError"},setConfig:function(){throw"MethodNotImplementedError"},updateConfig:function(){throw"MethodNotImplementedError"}}})(jQuery,Claypool);(function(b,a){a.Scanner$Interface={scan:function(){throw"MethodNotImplementedError"}}})(jQuery,Claypool);(function(b,a){a.BaseFactory=function(c){a.extend(this,a.SimpleCachingStrategy);b.extend(true,this,{configurationUrl:"./app/configs/config.js",configurationType:"json"},c);this.logger=new a.Logging.NullLogger();return this};b.extend(a.BaseFactory.prototype,a.SimpleCachingStrategy.prototype,a.Factory$Interface,a.Configurable$Interface,a.Scanner$Interface,{getConfig:function(){if(!this.configuration){this.logger.debug("Configuration for <%s> has not been set explicitly or has been updated implicitly.",this.configurationId);this.logger.debug("$$.Configuration: \n %o",a.Configuration);if(a.Configuration[this.configurationId]){this.logger.debug("Found Claypool.Configuration");this.configuration=a.Configuration[this.configurationId]}else{if(!a.Configuration){this.loadConfig()}}}return this.configuration},loadConfig:function(c){c=c||{};this.configurationUrl=c.url||this.configurationUrl;this.logger.debug("Attempting to load configuration from: %s",this.configurationUrl);var d=this;jQuery.ajax({type:"Get",url:this.configurationUrl,async:false,data:{},dataType:"json",success:function(e){if(d.configurationUrl=="./app/configs/config.js"){a.Configuration=a.Configuration||{};b.extend(true,a.Configuration,e)}else{d.setConfig(d.configurationId,e?e:null)}if(c.callback){c.callback(a.Configuration)}}})},setConfig:function(d,c){this.logger.debug("Setting configuration");this.configuration=c;a.Configuration[d]=c},updateConfig:function(c){throw"MethodNotImplementedError"}})})(jQuery,Claypool);(function(f,b){var e=[],c=0,a={},d;f.extend(a,{$:function(k,j){var g,h;if(j===undefined){g=null;for(h=0;h<e.length;h++){g=e[h]().get(k);if(g){return g}}return null}else{e[0]().put(k,j)}},register:function(h,g){if(Math.abs(g)>(e.length-1)/2){if(g===0&&f.isFunction(h.getContext)){e[0]=h.getContext}else{if(g!==0){if(f.isFunction(h.getContext)){e.push(h.getContext)}if(f.isFunction(h.getCachedContext)){e.unshift(h.getCachedContext)}}}}},resolve:function(g){var l;var j;var k;var h;l=function(i){return this[i]};j=g.split(".");k=null;for(h=0;h<j.length;h++){k=l.call(k,j[h]);if(k===undefined){return k}}return k},config:function(){var g,h;if(arguments.length===0){return b.Configuration}else{if(arguments.length===1&&typeof(arguments[0])=="string"){return f.resolve("Claypool.Configuration."+arguments[0])}else{g=f.resolve("Claypool.Configuration."+arguments[0]);if(g){h=arguments[1];if(h instanceof Array){g=f.merge(g,h)}else{if(h instanceof Object){g=f.extend(true,g,h)}}}}}return this},env:function(){var h,g;if(arguments.length==2){d=f.extend(true,d||{},f.config("env."+arguments[0]),f.config("env."+arguments[1]));return d}else{if(arguments.length===0){g=f.config("env.automap");for(h in g){if(new RegExp(h).exec(window.location)){return f.env("defaults",g[h])}}}else{if(arguments.length===1&&!(typeof(arguments[0])=="string")){return f.config("env",arguments[0])}return d[arguments[0]]||null}}return null}});f.extend(b,a,{uuid:function(){return new Date().getTime()+"_"+(++c)+"_"+Math.round(Math.random()*100000000)}});f.extend(f,a)})(jQuery,Claypool);Claypool.Application={};(function(d,b,c){var a=0;c.context=null;d.extend(c,{getContext:function(){if(!c.context){c.context=new c.Context()}return c.context},Initialize:function(e){d(document).trigger("claypool:initialize",[c]);
if(e){e()}d(document).trigger("ApplicationLoaded");return c.getContext()},Reinitialize:function(e){d(document).trigger("claypool:reinitialize",[c]);if(e){e()}d(document).trigger("ApplicationReloaded");return c.getContext()}});d.register(c,a);b.Commands={}})(jQuery,Claypool,Claypool.Application);(function(c,a,b){b.Context=function(d){a.extend(this,a.Context);this.contextContributors={};c.extend(true,this,d);this.logger=c.logger("Claypool.Application.Context")};c.extend(b.Context.prototype,a.Context.prototype,{get:function(g){var f,e,d;d=typeof(g)=="string"&&g.indexOf("#")>-1?[g.split("#")[0],"#"+g.split("#")[1]]:["",g];if(!this.find(d[0])){this.add(d[0],new a.SimpleCachingStrategy())}this.logger.debug("Searching application context for object: %s",g);f=null;f=this.find(d[0]).find(d[1]);if(f!==null){this.logger.debug("Found object in global application context. Object id: %s",g);return f}else{this.logger.debug("Searching for object in contributed application context. Object id: %s",g);for(e in this.contextContributors){this.logger.debug("Checking Application Context Contributor %s.",e);f=this.contextContributors[e].get(g);if(f!==null){this.logger.debug("Found object in contributed application context. Object id: %s",g);return f}}}this.logger.debug("Cannot find object in any application context. Object id: %s",g);return null},put:function(g,e){var f,d;f=typeof(g)=="string"&&g.indexOf("#")>-1?[g.split("#")[0],"#"+g.split("#")[1]]:["",g];d=this.find(f[0]);if(!d){d=new a.SimpleCachingStrategy();this.add(f[0],d)}if(d.find(f[0])){d.remove(f[1])}this.logger.debug("Adding object to global application context %s",g);d.add(f[1],e)}})})(jQuery,Claypool,Claypool.Application);(function(c,a,b){b.ContextContributor=function(d){a.extend(this,a.ContextContributor);c.extend(true,this,d);this.logger=c.logger("Claypool.Application.ContextContributor");return this};c.extend(b.ContextContributor.prototype,a.ContextContributor.prototype,{registerContext:function(d){this.logger.info("Registering Context id: %s",d);b.getContext().contextContributors[d]=this}})})(jQuery,Claypool,Claypool.Application);(function(c,a,b){b.Aware=function(d){c.extend(this,d);this.logger=c.logger("Claypool.Application.Aware")};c.extend(b.Aware.prototype,{$:function(){return b.getContext()}})})(jQuery,Claypool,Claypool.Application);(function(c,a,b){c.extend(c,{app:function(){return b.getContext()},boot:function(d){b.Initialize(d);return this},reboot:function(d){b.Reinitialize(d);return this},manage:function(d,e,f){c(document).bind("claypool:initialize",function(h,g){if(!g[e]){g[e]=new (c.resolve(d))();if(g.ContextContributor&&c.isFunction(g.ContextContributor)){g[e].registerContext(d)}}else{g[e].factory.updateConfig()}if(f&&c.isFunction(f)){f(g[e])}}).bind("claypool:reinitialize",function(h,g){g[e]=new (c.resolve(d))();if(g.ContextContributor&&c.isFunction(g.ContextContributor)){g[e].registerContext(d)}if(f&&c.isFunction(f)){f(g[e])}});return this}})})(jQuery,Claypool,Claypool.Application);